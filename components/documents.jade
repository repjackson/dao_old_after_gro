template(name='documents')
    .ui.padded.stackable.grid.header-wrapper
        .ui.hidden.divider
        .row
            .four.wide.column
                h1.ui.massive.inline.header 
                    +i name='documents'
                    |documents
                .ui.icon.large.button.new_document
                    i.green.plus.icon
                +cloud filter='document'
            .twelve.wide.column
                .ui.centered.four.cards
                    each document_items
                        +document_item
                        
                        
                        
template(name='document_card_template')
    .ui.segment.grid.document_card
        .sixteen.wide.column
            .content
                .header #{title}
                |!{description}
            .content
                i.small.documents.icon
                each date_tags
                    .ui.small.basic.label #{this}
            .content
                |#{attending_usernames.length} members
                each members
                    .ui.basic.label #{this}

template(name='document_page')
    with current_doc
        .ui.padded.stackable.grid.header-wrapper
            .row
                .twelve.wide.column
                    h1.ui.header #{title}
            .row
                .four.wide.column
                    if can_edit
                        a.ui.icon.button(href="/document/#{_id}/edit" title='edit')
                            +i name='settings'
                    +array_view key='tags' icon='tags' direct=true
                    +array_view key='location_tags' label='location tags' icon='marker' direct=true
                    +array_view key='date_tags' label='date tags' icon='documents' direct=true
                .six.wide.column
                    +image_view key='image_id' direct=true
                    +html_view key='description' direct=true
                .five.wide.column
                    .ui.header members
                    if is_member 
                        .ui.button.leave 
                            i.ban.grey.icon
                            |leave
                    else
                        .ui.button.join
                            i.green.checkmark.icon
                            |join
                    each members 
                        .ui.large.basic.label #{this}



template(name='document_page_edit')
    with current_doc
        .ui.padded.stackable.grid.header-wrapper
            .row
                .five.wide.column
                    .ui.inline.header #{title}
                    a.ui.large.basic.icon.button(href="/document/#{_id}")
                        i.big.green.checkmark.icon
                    .ui.basic.icon.button.delete_document_item
                        i.red.remove.icon
                    +text_edit key='title' icon='header' direct=true
                    +array_edit key='tags' icon='tags' direct=true
                    +array_edit key='location_tags' label='location tags' icon='marker' direct=true
                .six.wide.column
                    +image_edit key='image_id' direct=true
                    +html_edit key='description' direct=true
